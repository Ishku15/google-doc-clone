{"version":3,"sources":["TextEditor.js","App.js","index.js"],"names":["TOOLBAR_OPTIONS","header","font","list","color","background","script","align","TextEditor","documentId","useParams","id","useState","socket","setSocket","quill","setQuill","useEffect","s","io","disconnect","handler","delta","oldDelta","source","emit","on","off","updateContents","once","document","setContents","enable","interval","setInterval","getContents","clearInterval","wrapperRef","useCallback","wrapper","innerHTML","editor","createElement","append","q","Quill","theme","modules","toolbar","disable","setText","className","ref","App","exact","path","to","uuidV4","ReactDOM","render","StrictMode","getElementById"],"mappings":"yNAQUA,EAAkB,CACpB,CAAC,CAACC,OAAO,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,GAAE,KACtB,CAAC,CAACC,KAAK,KACP,CAAC,CAACC,KAAK,WAAW,CAACA,KAAK,WACxB,CAAC,OAAO,SAAS,aACjB,CAAC,CAACC,MAAM,IAAI,CAACC,WAAW,KACxB,CAAC,CAACC,OAAO,OAAO,CAACA,OAAO,UACxB,CAAC,CAACC,MAAM,KACR,CAAC,QAAQ,aAAa,cACtB,CAAC,UAIM,SAASC,IACpB,IAAUC,EAAcC,cAAjBC,GACP,EAA2BC,qBAA3B,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAyBF,qBAAzB,mBAAOG,EAAP,KAAaC,EAAb,KACAC,qBAAU,WACR,IAAMC,EAAKC,aAAG,gDAGd,OAFAL,EAAUI,GAEH,WACHA,EAAEE,gBAEN,IAGFH,qBAAU,WACN,GAAY,MAATJ,GAAwB,MAAPE,EAApB,CACA,IAAMM,EAAU,SAACC,EAAOC,EAASC,GACf,SAAXA,GACHX,EAAOY,KAAK,eAAeH,IAI/B,OAFAP,EAAMW,GAAG,cAAgBL,GAEnB,WACFN,EAAMY,IAAI,cAAgBN,OAEhC,CAACR,EAASE,IAEZE,qBAAU,WACN,GAAY,MAATJ,GAAwB,MAAPE,EAApB,CACA,IAAMM,EAAU,SAACC,GACbP,EAAMa,eAAeN,IAIzB,OAFAT,EAAOa,GAAG,kBAAoBL,GAExB,WACFR,EAAOc,IAAI,kBAAoBN,OAErC,CAACR,EAASE,IAGZE,qBAAU,WACM,MAATJ,GAAwB,MAAPE,IAEpBF,EAAOgB,KAAK,iBAAkB,SAAAC,GAC1Bf,EAAMgB,YAAYD,GAClBf,EAAMiB,YAGVnB,EAAOY,KAAK,eAAehB,MAE7B,CAACI,EAASE,EAAON,IAEnBQ,qBAAU,WACN,GAAY,MAATJ,GAAwB,MAAPE,EAApB,CAEA,IAAMkB,EAAWC,aAAY,WACzBrB,EAAOY,KAAK,gBAAiBV,EAAMoB,iBAtElB,KAwErB,OAAM,WACFC,cAAcH,OAEpB,CAACpB,EAAOE,IAEV,IAAMsB,EAAaC,uBAAY,SAAAC,GAC3B,GAAe,MAAXA,EAAJ,CACAA,EAAQC,UAAY,GACpB,IAAMC,EAASX,SAASY,cAAc,OACtCH,EAAQI,OAAOF,GACf,IAAMG,EAAI,IAAIC,IAAMJ,EAAS,CAACK,MAAO,OAASC,QAAQ,CAACC,QAAQhD,KAC/D4C,EAAEK,UACFL,EAAEM,QAAQ,eACVlC,EAAS4B,MACX,IACF,OACI,qBAAKO,UAAU,YAAYC,IAAKf,I,oBCpEzBgB,MAjBf,WACE,OACE,cAAC,IAAD,UAEE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,IAAD,CAAUC,GAAE,qBAAgBC,mBAE9B,cAAC,IAAD,CAAQF,KAAK,iBAAb,SACM,cAAC/C,EAAD,Y,MCddkD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF9B,SAAS+B,eAAe,W","file":"static/js/main.7c01dd56.chunk.js","sourcesContent":["import React, { useCallback , useEffect, useState } from 'react'\r\nimport Quill from 'quill'\r\nimport \"quill/dist/quill.snow.css\"\r\nimport {io} from 'socket.io-client'\r\nimport { useParams } from 'react-router-dom'\r\n\r\n\r\n    const SAVE_INTERVAL_MS = 2000\r\n    const TOOLBAR_OPTIONS = [\r\n        [{header:[1,2,3,4,5,6,false]}],\r\n        [{font:[]}],\r\n        [{list:\"ordered\"},{list:\"bullet\"}],\r\n        [\"bold\",\"italic\",\"underline\"],\r\n        [{color:[]},{background:[]}],\r\n        [{script:\"sub\"},{script:\"super\"}],\r\n        [{align:[]}],\r\n        [\"image\",\"blockquote\",\"code-block\"],\r\n        [\"clean\"]\r\n    ]\r\n\r\n\r\nexport default function TextEditor() {\r\n    const {id:documentId} = useParams()\r\n    const [socket,setSocket] = useState()\r\n    const [quill,setQuill] = useState()\r\n    useEffect(()=>{\r\n      const s =  io(\"https://google-doc-backend123.herokuapp.com/\")\r\n      setSocket(s)\r\n\r\n      return () => {\r\n          s.disconnect()\r\n      }\r\n    },[])\r\n\r\n\r\n    useEffect(()=>{\r\n        if(socket ==null || quill==null) return\r\n        const handler = (delta ,oldDelta,source)=>{\r\n            if(source !== 'user') return\r\n            socket.emit(\"send-changes\",delta)\r\n        }\r\n        quill.on('text-change' , handler )\r\n\r\n        return() =>{\r\n            quill.off('text-change' , handler)\r\n        }\r\n    },[socket , quill])\r\n\r\n    useEffect(()=>{\r\n        if(socket ==null || quill==null) return\r\n        const handler = (delta)=>{\r\n            quill.updateContents(delta)\r\n        }\r\n        socket.on('receive-changes' , handler )\r\n\r\n        return() =>{\r\n            socket.off('receive-changes' , handler)\r\n        }\r\n    },[socket , quill])\r\n\r\n\r\n    useEffect(()=>{\r\n        if(socket ==null || quill==null) return\r\n\r\n        socket.once('load-document' , document =>{\r\n            quill.setContents(document)\r\n            quill.enable()\r\n        })\r\n\r\n        socket.emit('get-document',documentId)\r\n\r\n    },[socket , quill, documentId])\r\n\r\n    useEffect(()=>{\r\n        if(socket ==null || quill==null) return\r\n\r\n        const interval = setInterval(()=>{\r\n            socket.emit('save-document', quill.getContents())\r\n        },SAVE_INTERVAL_MS)\r\n        return()=>{\r\n            clearInterval(interval)\r\n        }\r\n    },[socket,quill])\r\n\r\n    const wrapperRef = useCallback(wrapper => {\r\n        if (wrapper == null) return\r\n        wrapper.innerHTML = \"\"\r\n        const editor = document.createElement('div')\r\n        wrapper.append(editor)\r\n        const q = new Quill(editor , {theme: \"snow\" , modules:{toolbar:TOOLBAR_OPTIONS}})\r\n        q.disable()\r\n        q.setText('Loading....')\r\n        setQuill(q)\r\n    },[])\r\n    return (\r\n        <div className=\"container\" ref={wrapperRef}>\r\n        </div>\r\n    )\r\n}\r\n","import react from 'react';\nimport TextEditor from './TextEditor'\nimport { v4 as uuidV4} from \"uuid\"\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom'\n\nfunction App() {\n  return (\n    <Router>\n\n      <Switch>\n        <Route exact path=\"/\"> \n          <Redirect to={`/documents/${uuidV4()}`} />\n        </Route>\n        <Route  path=\"/documents/:id\">\n              <TextEditor />\n           </Route>\n    \n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}